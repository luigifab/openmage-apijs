/*!
 * Copyright 2008-2025 | Fabrice Creuzot (luigifab) <code~luigifab~fr>
 * https://github.com/luigifab/openmage-apijs
 * This program is free software, you can redistribute it or modify
 * it under the terms of the GNU General Public License (GPL).
 */
var apijsOpenMage=new function(){this.init=function(){var e=apijs.i18n.data;e.frca||(e.frca={}),e.cs[250]="Smazat soubor",e.cs[251]="Opravdu chcete tento soubor smazat?[br]Pozor, tuto operaci nelze vrátit zpět.",e.cs[252]="Chyba",e.cs[259]="Vymazat všechny soubory",e.cs[260]="Opravdu chcete smazat všechny soubory?[br]Pozor, tuto operaci nelze vrátit zpět.",e.cs[261]="Potvrďte zaškrtnutím políčka:",e.de[250]="Eine Datei löschen",e.de[251]="Sind Sie sicher, dass Sie diese Datei löschen möchten?[br]Achtung, diese Aktion ist unrückgängig.",e.de[252]="Fehler",e.de[253]="Sie verfügen nicht über die notwendigen Rechte um diese Operation durchzuführen, bitte [a §]aktualisieren Sie die Seite[/a].",e.de[254]="Es tut uns leid, diese Datei existiert nicht mehr, bitte [a §]aktualisieren Sie die Seite[/a].",e.de[259]="Alle Daten löschen",e.de[261]="Zur Bestätigung das Kontrollkästchen bestätigen:",e.el[252]="Σφάλμα",e.en[250]="Remove file",e.en[251]="Are you sure you want to remove this file?[br]Be careful, you can't cancel this operation.",e.en[252]="Error",e.en[253]="You are not authorized to perform this operation, please [a §]refresh the page[/a].",e.en[254]="Sorry, the file no longer exists, please [a §]refresh the page[/a].",e.en[255]="Clear cache",e.en[256]="Are you sure you want to clear the cache?[br]Be careful, you can't cancel this operation.",e.en[257]="Rename file",e.en[258]="Enter below the new name for the file.",e.en[259]="Remove all files",e.en[260]="Are you sure you want to remove all files?[br]Be careful, you can't cancel this operation.",e.en[261]="To confirm, check the checkbox:",e.es[250]="Borrar un archivo",e.es[251]="¿Está usted seguro(a) de que desea eliminar este archivo?[br]Atención, pues no podrá cancelar esta operación.",e.es[253]="No está autorizado-a para llevar a cabo esta operación, por favor [a §]actualice la página[/a].",e.es[254]="Disculpe, pero el archivo ya no existe, por favor [a §]actualice la página[/a].",e.es[255]="Vaciar la caché",e.es[256]="¿Está usted seguro(a) de querer vaciar la caché?[br]Cuidado, esta operación no puede ser cancelada.",e.frca[251]="Êtes-vous sûr(e) de vouloir supprimer ce fichier?[br]Attention, cette opération n'est pas annulable.",e.frca[256]="Êtes-vous certain(e) de vouloir vider le cache?[br]Attention, cette opération n'est pas annulable.",e.frca[260]="Êtes-vous sûr(e) de vouloir supprimer tous les fichiers?[br]Attention, cette opération n'est pas annulable.",e.fr[250]="Supprimer le fichier",e.fr[251]="Êtes-vous sûr(e) de vouloir supprimer ce fichier ?[br]Attention, cette opération n'est pas annulable.",e.fr[252]="Erreur",e.fr[253]="Vous n'êtes pas autorisé(e) à effectuer cette opération, veuillez [a §]actualiser la page[/a].",e.fr[254]="Désolé, le fichier n'existe plus, veuillez [a §]actualiser la page[/a].",e.fr[255]="Vider le cache",e.fr[256]="Êtes-vous certain(e) de vouloir vider le cache ?[br]Attention, cette opération n'est pas annulable.",e.fr[257]="Renommer le fichier",e.fr[258]="Saisissez ci-dessous le nouveau nom pour ce fichier.",e.fr[259]="Supprimer tous les fichiers",e.fr[260]="Êtes-vous sûr(e) de vouloir supprimer tous les fichiers ?[br]Attention, cette opération n'est pas annulable.",e.fr[261]="Pour confirmer, cochez la case :",e.hu[252]="Hiba",e.it[250]="Cancella i file",e.it[251]="Sei sicura di voler eliminare il file?[br]Attenzione, questa operazione non può essere annullata.",e.it[252]="Errore",e.it[253]="Non siete autorizzati a eseguire questa operazione, vi preghiamo di [a §]ricaricare la pagina[/a].",e.it[254]="Spiacenti, il file non esiste più, vi preghiamo di [a §]ricaricare la pagina[/a].",e.it[259]="Cancella tutti i file",e.it[260]="Sei sicura di voler cancellare tutti i file?[br]Attenzione, questa operazione non può essere annullata.",e.it[261]="Per confermare, seleziona la casella:",e.ja[250]="ファイルを削除",e.ja[252]="エラー",e.nl[252]="Fout",e.pl[250]="Usuń plik",e.pl[251]="Jesteś pewny, że chcesz usunąć ten plik?[br]Uwaga! Nie ma odwrotu od tej operacji.",e.pl[252]="Błąd",e.pl[259]="Usuń wszystkie pliki",e.pl[260]="Jesteś pewny, że chcesz usunąć ten plik?[br]Uwaga! Nie ma odwrotu od tej operacji.",e.pl[261]="Potwierdź twój wybór:",e.pt[250]="Suprimir um ficheiro",e.pt[251]="Tem certeza de que quer suprimir este ficheiro?[br]Cuidado, não pode cancelar esta operação.",e.pt[252]="Erro",e.pt[253]="Não é autorizado(a) para efetuar esta operação, por favor [a §]atualize a página[/a].",e.pt[254]="Lamento, o ficheiro já não existe, por favor [a §]atualize a página[/a].",e.ro[252]="Eroare",e.ru[250]="Удалить файл",e.ru[251]="Вы уверены, что хотите удалить этот файл?[br]Осторожно, вы не сможете отменить эту операцию.",e.ru[252]="Ошибка",e.ru[253]="Вы не авторизованы для выполнения этой операции, пожалуйста [a §]обновите страницу[/a].",e.ru[254]="Извините, но файл не существует, пожалуйста [a §]обновите страницу[/a].",e.sk[252]="Chyba",e.tr[252]="Hata",e.tr[255]="Önbelleği temizle",e.uk[252]="Помилка",e.zh[252]="错误信息"},this.error=function(e){"string"==typeof e&&e.indexOf("<!DOCTYPE")<0?apijs.dialog.has("upload")?apijs.upload.onError(!1,e):apijs.dialog.dialogInformation(apijs.i18n.translate(252),e,"error"):(apijs.dialog.remove("lock"),self.location.reload())},this.sendFiles=function(e,t,a,i,n,r){apijs.upload.sendFiles(e,t,"myimage",a,i,n,apijsOpenMage.updateForm),"string"==typeof r&&((e=document.createElement("p")).innerHTML='<label><input type="checkbox" name="exclude" /> '+r+"</label>",apijs.dialog.t2.appendChild(e))},this.updateForm=function(e,t,a){-1<e.indexOf("{")&&(e=JSON.parse(e.slice(e.indexOf("{")))).bbcode&&apijsOpenMage.error(e.bbcode),(a=document.getElementById("apijsGallery"))?((e.filter=document.getElementById("apijsFilter"))&&(e.filter=parseInt(e.filter.value,10)),a.parentNode.innerHTML=e.html,a.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(function(e){e.checked=e.hasAttribute("checked"),e.hasAttribute("onchange")&&apijsOpenMage.checkVal(e)}),apijs.slideshow.init(),apijs.dialog.has("error")||apijs.dialog.actionClose(),0<e.filter&&((a=document.getElementById("apijsFilter")).value=e.filter,a.dispatchEvent(new Event("change"))),t&&(t.classList.remove("changed"),varienWindowOnload(!0))):MediabrowserInstance.selectFolder(MediabrowserInstance.currentNode)},this.actionSave=function(e){document.querySelector("body").classList.add("fabload");var t=new XMLHttpRequest,a=document.querySelector(".tab-item-link.active");t.open("POST",e+"?isAjax=true",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){4===t.readyState&&([0,200].has(t.status)?0===t.responseText.indexOf("success-")?apijsOpenMage.updateForm(t.responseText,a):apijsOpenMage.error(t.responseText):apijsOpenMage.error(t.status),document.querySelector("body").classList.remove("fabload"))},t.send(apijs.serialize(document.getElementById("product_edit_form"),"apijs"))},this.removeAttachment=function(e){apijs.dialog.dialogConfirmation(apijs.i18n.translate(250),apijs.i18n.translate(251),apijsOpenMage.actionRemoveAttachment,e)},this.removeAllAttachments=function(e){apijs.dialog.dialogFormOptions(apijs.i18n.translate(259),apijs.i18n.translate(260)+"[p][label]"+apijs.i18n.translate(261)+' [input type="checkbox"][/label]',e,apijsOpenMage.actionRemoveAllAttachments)},this.actionRemoveAttachment=function(e){var t=new XMLHttpRequest,a=document.querySelector(".tab-item-link.active");t.open("GET",e,!0),t.onreadystatechange=function(){4===t.readyState&&([0,200].has(t.status)?0===t.responseText.indexOf("success-")?apijsOpenMage.updateForm(t.responseText,a):apijsOpenMage.error(t.responseText):apijsOpenMage.error(t.status))},t.send()},this.actionRemoveAllAttachments=function(e){if("boolean"==typeof e)return apijs.html("input").checked;apijsOpenMage.actionRemoveAttachment(e)},this.checkVal=function(e){for(var t=e;"BODY"!==t.nodeName&&!t.querySelector(".val");)t=t.parentNode;(t=t.querySelector(".val"))&&(e.checked?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))},this.filter=function(e){var i,n,r,t;"string"==typeof e&&(r=e,((e=document.getElementById("apijsFilter")).value===r&&"all"!==r||"all"===e.value&&"all"===r)&&(r="none"),e.value=r),"BUTTON"===e.nodeName&&(n=e.getAttribute("data-text"),e.setAttribute("data-text",e.textContent),e.textContent=n,e.setAttribute("data-state","0"==e.getAttribute("data-state")?"1":"0")),document.getElementById("apijsGallery").querySelectorAll("tbody tr[id]").forEach(function(a){r=[],document.getElementById("apijsGallery").querySelectorAll("tr.filter th").forEach(function(e,t){(e=e.querySelector(".filter"))?"SELECT"===e.nodeName?(i=Math.floor(parseInt(e.value,10)/100),n=Math.floor(parseInt(a.querySelectorAll("td")[t].querySelector("input.position").value,10)/100),r.push("all"===e.value||n==i)):"BUTTON"===e.nodeName&&(i="1"==e.getAttribute("data-state"),n=a.querySelectorAll("td")[t].querySelector("input.check:not(.def)").checked,e.hasAttribute("data-reverse")&&(n=!n),r.push(!i||i!==n)):r.push(!0)}),a.setAttribute("style",-1<r.indexOf(!1)?"display:none;":""),a.removeAttribute("title")}),"SELECT"===e.nodeName&&!isNaN(e.value)&&(e=document.querySelector("tr.grp"+e.value))&&(t=e.getBoundingClientRect()).top<0&&t.bottom<=window.innerHeight&&e.scrollIntoView()},this.renameMedia=function(e){(e=e.parentNode.parentNode).click(),e.classList.contains("selected")||e.click();var t=e.querySelector(".filename").textContent.trim(),t='[p][label for="apijsinput"]'+apijs.i18n.translate(258)+'[/label][/p][input type="text" name="name" value="'+t+'" spellcheck="false" id="apijsinput"]';apijs.dialog.dialogFormOptions(apijs.i18n.translate(257),t,"action.php",apijsOpenMage.actionRenameMedia,e.id,"editname"),apijs.dialog.t1.querySelector("input").select()},this.actionRenameMedia=function(e,t){if("boolean"==typeof e)return!0;var a;"string"==typeof e&&((a=new XMLHttpRequest).open("POST",MediabrowserInstance.renameFileUrl+"?isAjax=true",!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4===a.readyState&&[0,200].has(a.status))try{MediabrowserInstance.onAjaxSuccess(a),MediabrowserInstance.selectFolder(MediabrowserInstance.currentNode)}catch(e){apijsOpenMage.error(e.message)}},a.send("form_key="+FORM_KEY+"&file="+encodeURIComponent(t)+"&name="+encodeURIComponent(document.getElementById("apijsinput").value)))},this.removeMedia=function(e){(e=e.parentNode.parentNode).click(),e.classList.contains("selected")||e.click(),apijs.dialog.dialogConfirmation(apijs.i18n.translate(250),apijs.i18n.translate(251),apijsOpenMage.actionRemoveMedia,e.id)},this.actionRemoveMedia=function(e){var t=new XMLHttpRequest;t.open("POST",MediabrowserInstance.deleteFilesUrl+"?isAjax=true",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(4===t.readyState&&[0,200].has(t.status))try{MediabrowserInstance.onAjaxSuccess(t),MediabrowserInstance.selectFolder(MediabrowserInstance.currentNode)}catch(e){apijsOpenMage.error(e.message)}},t.send("form_key="+FORM_KEY+"&file="+encodeURIComponent(e))},this.overloadMediabrowser=function(){var t,e=[];"function"==typeof Mediabrowser&&e.push(Mediabrowser),"object"==typeof MediabrowserInstance&&e.push(MediabrowserInstance),e.forEach(function(e){"function"!=typeof e.origHideElement&&(e.origHideElement=e.hideElement,e.hideElement=function(e){this.origHideElement(e),"loading-mask"===e&&(document.getElementById("loading-mask").classList.add("no-display"),document.getElementById("contents").classList.remove("no-display"),document.getElementById("contents-loader").classList.add("no-display"),(t=document.querySelector(".main-col-inner .form-buttons"))&&t.removeAttribute("style"),(t=document.querySelector(".content-header-floating .form-buttons"))&&t.removeAttribute("style"),apijs.dialog.has("error")||apijs.dialog.actionClose())},e.origShowElement=e.showElement,e.showElement=function(e){this.origShowElement(e),"loading-mask"===e&&(document.getElementById("loading-mask").classList.add("no-display"),document.getElementById("contents").classList.add("no-display"),document.getElementById("contents-loader").classList.remove("no-display"),(t=document.querySelector(".main-col-inner .form-buttons"))&&(t.style.visibility="hidden"),t=document.querySelector(".content-header-floating .form-buttons"))&&(t.style.visibility="hidden")},e.origDrawBreadcrumbs=e.drawBreadcrumbs,e.drawBreadcrumbs=function(e){this.origDrawBreadcrumbs(e),document.getElementById("breadcrumbs")||(e=this.tree.getNodeById("root"),document.getElementById("content_header").insert({after:'<ul class="breadcrumbs" id="breadcrumbs"><li><a href="#" onclick="MediabrowserInstance.selectFolderById(\''+e.id+"');\">"+e.text+"</a></li></ul>"}))})}),MediabrowserInstance.renameFileUrl=MediabrowserInstance.deleteFilesUrl.replace(/[a-z_]+\/deleteFiles\//,"apijs_wysiwyg/renameFile/"),MediabrowserInstance.deleteFilesUrl=MediabrowserInstance.deleteFilesUrl.replace(/[a-z_]+\/deleteFiles\//,"apijs_wysiwyg/deleteFiles/"),MediabrowserInstance.deleteFolderUrl=MediabrowserInstance.deleteFolderUrl.replace(/[a-z_]+\/deleteFolder\//,"apijs_wysiwyg/deleteFolder/")},this.clearCache=function(e){apijs.dialog.dialogConfirmation(apijs.i18n.translate(255),apijs.i18n.translate(256),apijsOpenMage.actionClearCache,e)},this.actionClearCache=function(e){apijs.dialog.remove("waiting","lock"),self.location.href=e}};"function"==typeof self.addEventListener&&self.addEventListener("apijsload",apijsOpenMage.init.bind(apijsOpenMage));
//# sourceMappingURL=apijs-openmage.min.js.map